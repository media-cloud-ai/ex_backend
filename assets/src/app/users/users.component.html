<h1>
  Users
</h1>

<div class=new>
  <div class=title>
    <i class="material-icons">add</i>
    <label>
      Add User
    </label>
  </div>
  <div class="form">
    <mat-form-field class="email-input">
      <input
        matInput
        type="text"
        placeholder="Email"
        [(ngModel)]="email"
        >
    </mat-form-field>
    <button mat-button
      color="primary"
      (click)="inviteUser()">
        <i class="material-icons">add</i> Invite
    </button>
    <span class=message>
      {{error_message}}
    </span>
  </div>
</div>

<ul *ngIf="users" class="users">
  <li *ngIf="users.total == 0">No users found.</li>
  <li class="users-header">
    <span class="email">
      Email
    </span>
    <span class="rights">
      Rights
    </span>
    <span class="status">
      Status
    </span>
    <span class="access_key_id">
      Access Key ID
    </span>
    <span class="actions">
    </span>
  </li>
  <li
    *ngFor="let user of users.data"
    class="user"
    >
    <user-component [user]=user></user-component>
    <span class="creds">
      <button mat-raised-button
        color="primary"
        *ngIf="user.access_key_id; else notShow"
        (click)="generateCredentials(user)">
          <i class="material-icons">key</i> Regenerate
      </button>
    </span>
    <ng-template #notShow>
      <span class="creds">
        <button mat-raised-button
          color="primary"
          (click)="generateCredentials(user)">
            <i class="material-icons">key</i> Generate Credentials
        </button>
      </span>
    </ng-template>
    <span class="actions">
      <button mat-raised-button
        color="warn"
        (click)="removeUser(user.id)">
          <i class="material-icons">delete</i> Delete
      </button>
    </span>
  </li>
</ul>

<mat-paginator
  class="paginator"
  showFirstLastButtons=true
  [length]="length"
  [pageSize]="pageSize"
  [pageIndex]="page"
  (page)="pageEvent = eventGetUsers($event)">
</mat-paginator>
